<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MapGameRepository.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">RESTchess</a> &gt; <a href="index.source.html" class="el_package">aiss.model.repository</a> &gt; <span class="el_source">MapGameRepository.java</span></div><h1>MapGameRepository.java</h1><pre class="source lang-java linenums">package aiss.model.repository;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

import aiss.model.Game;
import aiss.model.Player;

<span class="nc" id="L10">public class MapGameRepository implements GameRepository {</span>
	Map&lt;String, Game&gt; gameMap;
	Map&lt;String, Player&gt; playerMap;
<span class="nc" id="L13">	private static MapGameRepository instance=null;</span>
<span class="nc" id="L14">	private int index=0;</span>
	
	public static MapGameRepository getInstance() {
		
<span class="nc bnc" id="L18" title="All 2 branches missed.">		if (instance==null) {</span>
<span class="nc" id="L19">			instance = new MapGameRepository();</span>
<span class="nc" id="L20">			instance.init();</span>
		}
		
<span class="nc" id="L23">		return instance;</span>
	}
	
	public void init() {
		
<span class="nc" id="L28">		gameMap = new HashMap&lt;String,Game&gt;();</span>
<span class="nc" id="L29">		playerMap = new HashMap&lt;String,Player&gt;();</span>
		
		// Create Players
<span class="nc" id="L32">		Player player1=new Player();</span>
<span class="nc" id="L33">		player1.setName(&quot;Viswanathan Anand&quot;);</span>
<span class="nc" id="L34">		player1.setRating(&quot;2772&quot;);</span>
<span class="nc" id="L35">		addPlayer(player1);</span>
		
<span class="nc" id="L37">		Player player2=new Player();</span>
<span class="nc" id="L38">		player2.setName(&quot;Levon Aronian&quot;);</span>
<span class="nc" id="L39">		player2.setRating(&quot;2802&quot;);</span>
<span class="nc" id="L40">		addPlayer(player2);</span>
		
<span class="nc" id="L42">		Player player3=new Player();</span>
<span class="nc" id="L43">		player3.setName(&quot;Paul Morphy&quot;);</span>
<span class="nc" id="L44">		player3.setRating(&quot;2690&quot;);</span>
<span class="nc" id="L45">		addPlayer(player3);</span>
		
<span class="nc" id="L47">		Player player4=new Player();</span>
<span class="nc" id="L48">		player4.setName(&quot;Johan Lowenthal&quot;);</span>
<span class="nc" id="L49">		player4.setRating(&quot;2510&quot;);</span>
<span class="nc" id="L50">		addPlayer(player4);</span>
		
<span class="nc" id="L52">		Player player5=new Player();</span>
<span class="nc" id="L53">		player5.setName(&quot;Stockfish&quot;);</span>
<span class="nc" id="L54">		player5.setRating(&quot;3549&quot;);</span>
<span class="nc" id="L55">		addPlayer(player5);</span>
		
<span class="nc" id="L57">		Player player6=new Player();</span>
<span class="nc" id="L58">		player6.setName(&quot;Player&quot;);</span>
<span class="nc" id="L59">		player6.setRating(&quot;1500&quot;);</span>
<span class="nc" id="L60">		addPlayer(player6);</span>
		
		// Create Games
<span class="nc" id="L63">		Game game1=new Game();</span>
<span class="nc" id="L64">		game1.setFen(&quot;2r3k1/pb4p1/4p3/1p3p1q/5Pn1/P1NQb2P/1P4P1/R1B2R1K w - - 4 24&quot;);</span>
<span class="nc" id="L65">		game1.setResult(&quot;black wins&quot;);</span>
<span class="nc" id="L66">		game1.setWhite(player2);</span>
<span class="nc" id="L67">		game1.setBlack(player1);</span>
<span class="nc" id="L68">		game1.setYear(&quot;2013&quot;);</span>
<span class="nc" id="L69">		addGame(game1);</span>
		
<span class="nc" id="L71">		Game game2=new Game();</span>
<span class="nc" id="L72">		game2.setFen(&quot;8/5pk1/8/4q1pp/8/2Q4P/1P3PP1/6K1 b - - 1 38&quot;);</span>
<span class="nc" id="L73">		game2.setResult(&quot;black wins&quot;);</span>
<span class="nc" id="L74">		game2.setWhite(player4);</span>
<span class="nc" id="L75">		game2.setBlack(player3);</span>
<span class="nc" id="L76">		game2.setYear(&quot;1859&quot;);</span>
<span class="nc" id="L77">		addGame(game2);</span>
		
<span class="nc" id="L79">		Game game3=new Game();</span>
<span class="nc" id="L80">		game3.setFen(&quot;8/8/3b2k1/8/8/p7/P1K5/8 b - - 3 44&quot;);</span>
<span class="nc" id="L81">		game3.setResult(&quot;draw&quot;);</span>
<span class="nc" id="L82">		game3.setWhite(player3);</span>
<span class="nc" id="L83">		game3.setBlack(player4);</span>
<span class="nc" id="L84">		game3.setYear(&quot;1859&quot;);</span>
<span class="nc" id="L85">		addGame(game3);</span>
		
<span class="nc" id="L87">		Game game5=new Game();</span>
<span class="nc" id="L88">		game5.setFen(&quot;rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1&quot;);</span>
<span class="nc" id="L89">		game5.setResult(&quot;&quot;);</span>
<span class="nc" id="L90">		game5.setWhite(player6);</span>
<span class="nc" id="L91">		game5.setBlack(player5);</span>
<span class="nc" id="L92">		game5.setYear(&quot;2021&quot;);</span>
<span class="nc" id="L93">		addGame(game5);</span>
<span class="nc" id="L94">	}</span>
	
	// Game related operations
	@Override
	public void addGame(Game g) {
<span class="nc" id="L99">		String id = &quot;g&quot; + index++;	</span>
<span class="nc" id="L100">		g.setId(id);</span>
<span class="nc" id="L101">		gameMap.put(id,g);</span>
<span class="nc" id="L102">	}</span>
	
	@Override
	public Collection&lt;Game&gt; getAllGames() {
<span class="nc" id="L106">		return gameMap.values();</span>
	}

	@Override
	public Game getGame(String id) {
<span class="nc" id="L111">		return gameMap.get(id);</span>
	}
	
	@Override
	public void updateGame(Game g) {
<span class="nc" id="L116">		gameMap.put(g.getId(),g);</span>
<span class="nc" id="L117">	}</span>

	@Override
	public void removeGame(String id) {	
<span class="nc" id="L121">		gameMap.remove(id);</span>
<span class="nc" id="L122">	}</span>

	@Override
	public void addMove(String gameId, String move) {
<span class="nc" id="L126">		gameMap.get(gameId).addMove(move);</span>
		
<span class="nc" id="L128">	}</span>

	@Override
	public void addPlayMove(String gameId, String move) {
<span class="nc" id="L132">		gameMap.get(gameId).addPlayMove(move);</span>
<span class="nc" id="L133">	}</span>
	
	
	// Player related operations
	
	@Override
	public void addPlayer(Player p) {
<span class="nc" id="L140">		String id = &quot;p&quot; + index++;</span>
<span class="nc" id="L141">		p.setId(id);</span>
<span class="nc" id="L142">		playerMap.put(id, p);</span>
<span class="nc" id="L143">	}</span>
	
	@Override
	public Collection&lt;Player&gt; getAllPlayers() {
<span class="nc" id="L147">			return playerMap.values();</span>
	}

	@Override
	public Player getPlayer(String playerId) {
<span class="nc" id="L152">		return playerMap.get(playerId);</span>
	}

	@Override
	public void updatePlayer(Player p) {
<span class="nc" id="L157">		Player player = playerMap.get(p.getId());</span>
<span class="nc" id="L158">		player.setName(p.getName());</span>
<span class="nc" id="L159">		player.setRating(p.getRating());</span>
<span class="nc" id="L160">	}</span>

	@Override
	public void removePlayer(String playerId) {
<span class="nc" id="L164">		playerMap.remove(playerId);</span>
<span class="nc" id="L165">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>